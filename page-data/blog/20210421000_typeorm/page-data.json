{
    "componentChunkName": "component---src-templates-blog-js",
    "path": "/blog/20210421000_typeorm",
    "result": {"pageContext":{"frontmatter":{"id":"20210421000_typeorm","title":"使用 TypeORM 的相关笔记","subtitle":"在某些情况下，不得不使用 TypeORM，因此，对其相关操作做一简单的笔记","subject":"Database","authors":"Chris Wei","keywords":"TypeORM;migration","tags":null,"category":"指导手册","cover":"https://media.inkscape.org/media/resources/file/Koi_carp_2.svg","videos":null,"created_when":"2021-04-21T00:00:00.000Z","updated_when":"2021-04-21T00:00:00.000Z","level":100},"excerpt":"# 使用 TypeORM 的相关笔记\n\n# Install TypeORM CLI\n","html":"<h1>使用 TypeORM 的相关笔记</h1>\n<h2>Install TypeORM CLI</h2>\n<pre><code>npm install -g typeorm\n</code></pre>\n<h2>Generate mirgration after entity model updates</h2>\n<pre><code>typeorm migration:generate -n [name of this migration]\n</code></pre>\n<h2>Apply mirgration to database</h2>\n<pre><code>typeorm migration:run\n</code></pre>\n<h2>问题汇总</h2>\n<h4>生成的 migration 文件不对</h4>\n<p>entity 的修改针对的是 [表A]，可是生成的 <code>migration</code> 文件，针对的是  [表B]</p>\n<blockquote>\n<p>解决方案：删除 <code>dist</code> 目录，重新构建项目 <code>yarn start:dev</code>，重新生成 <code>dist</code> 目录</p>\n</blockquote>\n<h4>migration 没有应用到目标数据库</h4>\n<p>执行 <code>migration:run</code> 没有发现需要执行的 migration，数据库也没有更新</p>\n<blockquote>\n<p>解决方案：手动构建项目，执行 <code>yarn start:dev</code>，将源代码目录 <code>src</code> 下的 <code>migration</code> 文件，构建成 <code>dist</code> 目录下的 <code>migration</code></p>\n</blockquote>"}},
    "staticQueryHashes": ["2877226700","3159585216","3659731985","3670619862"]}