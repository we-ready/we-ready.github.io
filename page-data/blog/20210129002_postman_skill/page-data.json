{
    "componentChunkName": "component---src-templates-blog-js",
    "path": "/blog/20210129002_postman_skill",
    "result": {"pageContext":{"frontmatter":{"id":"20210129002_postman_skill","title":"Postman的使用技巧","subtitle":"在调试后端接口时，postman 是比较常用的一个工具。挖掘深层功能，进一步提升开发与沟通效率。","subject":"API","authors":"Chris Wei","keywords":"环境变量;js脚本","tags":"postman","category":"经验技巧","cover":"https://media.inkscape.org/media/resources/file/Gears_8IWk3lq.svg","videos":null,"created_when":"2021-01-29","updated_when":"2021-01-29","level":200},"excerpt":"# Postman的使用技巧\n\n# 账号\n\n可以注册 `postman` 账号，从而把本地的各种数据，同步到云…\n","html":"<h1>Postman的使用技巧</h1>\n<h2>账号</h2>\n<p>可以注册 <code>postman</code> 账号，从而把本地的各种数据，同步到云端。</p>\n<h2>接口的组织</h2>\n<ul>\n<li><code>collection</code> - 可以用于组织不同项目，不同服务的接口</li>\n<li><code>folder</code> - 可以用于组织不同业务场景，或者不同实体的相关接口</li>\n</ul>\n<h2>环境变量</h2>\n<ul>\n<li><code>environment</code> 可以定义多个可命名的环境</li>\n<li><code>variable</code> 某个环境下，可以定义可复用的环境变量</li>\n<li><code>global</code> 也有全局的环境变量</li>\n</ul>\n<h2>API 请求地址栏</h2>\n<p>通过环境变量，写入可变的 <code>url</code> 地址 及 <code>port</code> 端口</p>\n<pre><code>http://{{hostname}}:{{portnumber}}/api/login\n</code></pre>\n<h2>Body</h2>\n<p>不要在 Body 里面写如固定的请求参数，而是使用一个环境变量，比如：<code>requestBody</code></p>\n<pre><code>{{requestBody}}\n</code></pre>\n<h2>Pre-request</h2>\n<p>接口请求正式发送给后端服务 API 之前，<code>Pre-request</code> 中的脚本会被执行，因此，可以在这里，通过脚本，设置 <code>requestBody</code></p>\n<pre><code>const functionName = \"add\";\nconst params = [119,111, { name: 'Chris', role: 'dev' }];\n\npostman.setGlobalVariable(\"requestBody\", JSON.stringify({\n    functionName, \n    params\n}));\n</code></pre>\n<h2>Test</h2>\n<p>接口请求完成之后，<code>Test</code> 中的脚本会被执行，因此，可以在这里，通过脚本，获取请求所获得的响应，进而设置相关的环境变量。例如，登录接口请求完成之后，可以根据响应信息，设置用户的<code>token</code>、<code>ID</code> 等信息</p>\n<pre><code>let res = JSON.parse(responseBody);\n\npm.environment.set(\"token\", res.token);\npm.environment.set(\"credential_id\", res.credential.id);\npm.environment.set(\"user_id\", res.credential.user_id);\n</code></pre>\n<h2>导入与导出</h2>\n<ul>\n<li>可以导出某个 <code>collection</code> 的全部接口定义</li>\n<li>可以导出某个 <code>environment</code> 的全部 <code>variable</code></li>\n<li>导出的内容，可以作为 API 文档的补充，供开发人员参考</li>\n</ul>"}},
    "staticQueryHashes": ["3159585216","3208650349","3659731985"]}