{
    "componentChunkName": "component---src-templates-blog-js",
    "path": "/blog/20210125006_wechat_dev_setup",
    "result": {"pageContext":{"frontmatter":{"id":"20210125006_wechat_dev_setup","title":"微信公众号开发的相关配置","subtitle":"基于微信公众号开发所需的公共号管理控制台相关配置","subject":"WeReady","author":"Chris Wei","keywords":"微信;公众号","tags":null,"category":"指导手册","cover":"http://qiniuargus.weready.online/blog/desktop.jpg","created_when":"2021-01-25","updated_when":"2021-01-25","level":200},"excerpt":"# 微信公众号开发的相关配置\n\n# 参考文章\n\n*   []()\n\n*   [OAuth2.0实战之微信授权篇\\_慕课…]()\n","html":"<h1>微信公众号开发的相关配置</h1>\n<h2>参考文章</h2>\n<ul>\n<li><a href=\"https://cnodejs.org/topic/555fec114eb040084cfe5d15\"></a></li>\n<li><a href=\"https://www.imooc.com/article/17696\">OAuth2.0实战之微信授权篇_慕课手记</a></li>\n<li><a href=\"http://doxmate.cool/node-webot/wechat-api/index.html#index_%E4%BA%A4%E6%B5%81%E7%BE%A4\">wechat-api Documentation</a></li>\n</ul>\n<h2>微信公众平台设置</h2>\n<p><a href=\"https://mp.weixin.qq.com\">微信公众平台</a></p>\n<h3>设置 ==> 公众号设置</h3>\n<h4>功能设置</h4>\n<ul>\n<li>设置JS接口安全域名</li>\n</ul>\n<p>[domainurl]</p>\n<ul>\n<li>设置网页授权域名</li>\n</ul>\n<p>[domainurl]</p>\n<ul>\n<li>下载 MP_verify_xxxxxxx.txt</li>\n</ul>\n<blockquote>\n<p>下载到 <code>/[project folder]/public</code></p>\n</blockquote>\n<blockquote>\n<p>确保微信相关设置和代码的 setting/config 设置一致</p>\n</blockquote>\n<ul>\n<li>设置服务器路由</li>\n</ul>\n<pre><code>app.use(express.static(path.join(__dirname, 'public')));\n</code></pre>\n<h3>开发 ==> 基本配置</h3>\n<ul>\n<li>开发者ID（AppID）</li>\n<li>开发者密码（AppSecret）</li>\n<li>IP 白名单</li>\n<li>服务器地址（URL）</li>\n<li>令牌（Token）</li>\n<li>消息加解密方式</li>\n</ul>\n<blockquote>\n<p>确保项目的 setting 目录中的 appid、appsecret、url、token 的配置正确（真正部署到生产环境时，这些信息需要删除，并保存到服务器的环境变量中）\n确保服务器的 IP 地址在白名单之内：58.37.109.51\n消息加解密方式根据不同情况正确选择\n服务器地址（URL）需要能够正确解析并响应微信服务器的验证请求\n服务器地址（URL）举例：<code>http://www.[domainname].com/wechat/token/check</code>\n每次修改服务器配置，如果一切配置无误，则修改成功，配置生效，否则，无法完成修改（这也能够在一定程度上验证，微信服务器和代码的匹配）</p>\n</blockquote>\n<h3>开发 ==> 接口权限</h3>\n<ul>\n<li>未获得的接口</li>\n</ul>\n<blockquote>\n<p>微信小店</p>\n</blockquote>\n<blockquote>\n<p>设备功能</p>\n</blockquote>\n<ul>\n<li>网页授权</li>\n</ul>\n<blockquote>\n<p>与 <strong>设置 ==> 公众号设置</strong> 是同一个配置页面</p>\n</blockquote>\n<h4>微信支付 | 商户平台</h4>\n<p><a href=\"https://pay.weixin.qq.com\">微信支付商户平台</a></p>\n<h4>账户中心</h4>\n<ul>\n<li>操作证书：在本机安装操作证书</li>\n<li>商户信息：微信支付商户号（mchId）</li>\n<li>API 安全：API 密钥，设置 API 密钥（partnerKey）</li>\n</ul>\n<h4>产品中心</h4>\n<ul>\n<li>开发配置 -> 支付配置：公众号支付（authcheck）；扫码支付（notifyUrl）；</li>\n<li>APPID 授权管理：绑定授权（appId）</li>\n</ul>\n<h2>微信 Web 开发者工具</h2>\n<blockquote>\n<p>直接输入 URL，检查浏览器调试信息输出</p>\n</blockquote>\n<h2>开发环境 与 生产环境</h2>\n<p>切换 开发环境 与 生产环境 的时候，经常需要修改的微信配置包括：</p>\n<p>公众号：</p>\n<ul>\n<li>设置 ==> 公众号设置 ==> 功能设置 ==> 网页授权域名</li>\n<li>开发 ==> 基本配置 ==> 服务器配置 ==> 服务器地址（URL）</li>\n</ul>\n<p>商铺：</p>\n<ul>\n<li>产品中心 ==> 开发配置 ==> 支付配置 ==> 扫码回调链接</li>\n</ul>"}},
    "staticQueryHashes": ["1280648994","3159585216"]}